(()=>{"use strict";var e={};(e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(e);var t,l=function(){return l=Object.assign||function(e){for(var t,l=1,o=arguments.length;l<o;l++)for(var i in t=arguments[l])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},l.apply(this,arguments)},o=function(e){var t={whiteBloodCells:"normal",redBloodCells:"normal",thrombocytes:"normal"};return e.whiteBloodCells<4500?t.whiteBloodCells="low":e.whiteBloodCells>11e3&&(t.whiteBloodCells="high"),e.redBloodCells<47e5?t.redBloodCells="low":e.redBloodCells>61e5&&(t.redBloodCells="high"),e.thrombocytes<15e4?t.thrombocytes="low":e.thrombocytes>45e4&&(t.thrombocytes="high"),t},i=function(){return i=Object.assign||function(e){for(var t,l=1,o=arguments.length;l<o;l++)for(var i in t=arguments[l])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},n=(t=function(e){var t=l({},{whiteBloodCells:0,redBloodCells:0,thrombocytes:0,aggressiveLeukemiaCells:0,nonAggressiveLeukemiaCells:0,drug:null,alive:!0,criticalTimeStart:null}),o=Math.random,i=(6.5*o()+4.5)*Math.pow(10,3),n=(o()*(6.1-4.7)+4.7)*Math.pow(10,6),r=(3*o()+1.5)*Math.pow(10,5);return t.whiteBloodCells=i,t.redBloodCells=n,t.thrombocytes=r,t}(),t.aggressiveLeukemiaCells=0,t.nonAggressiveLeukemiaCells=0,t),r=function(e){var t=i({},e),l=1*Math.pow(10,3);return t.aggressiveLeukemiaCells+=l,t.nonAggressiveLeukemiaCells+=l,t}(n);function a(e){switch(e){case"Alexan":return 1e3;case"Oncaspar":case"Methotrexate":case"Mercaptopurine":return 15e3;default:return 0}}var s={};s.redBloodCellCount=document.getElementById("red-blood-cell-count"),s.whiteBloodCellCount=document.getElementById("white-blood-cell-count"),s.thrombocytesCount=document.getElementById("thrombocytes-count"),s.aggressiveLeukemiaCellCount=document.getElementById("aggressive-leukemia-cell-count"),s.nonAggressiveLeukemiaCellCount=document.getElementById("non-aggressive-leukemia-cell-count"),s.drugInAction=document.getElementById("drug-in-action"),s.isAlive=document.getElementById("is-alive"),s.criticalTime=document.getElementById("critical-time"),s.pauseBtn=document.getElementById("pause-btn"),s.alexanBtn=document.getElementById("alexan-btn");var c=r,u=0,d=!0,m=null;s.pauseBtn.onclick=function(e){d=!d,s.pauseBtn.innerText=d?"resume":"pause"},s.alexanBtn.onclick=function(e){c.drug={type:"Alexan",introductionTime:u},m=a("Alexan")};var g=function(){if(!c.alive)return s.isAlive.innerHTML=c.alive,void s.isAlive.classList.add("critical");var e;if(e=o(c),s.whiteBloodCellCount.innerHTML=c.whiteBloodCells.toFixed(),"normal"!==e.whiteBloodCells?s.whiteBloodCellCount.classList.add("critical"):s.whiteBloodCellCount.classList.remove("critical"),s.redBloodCellCount.innerHTML=c.redBloodCells.toFixed(),"normal"!==e.redBloodCells?s.redBloodCellCount.classList.add("critical"):s.redBloodCellCount.classList.remove("critical"),s.thrombocytesCount.innerHTML=c.thrombocytes.toFixed(),"normal"!==e.thrombocytes?s.thrombocytesCount.classList.add("critical"):s.thrombocytesCount.classList.remove("critical"),s.aggressiveLeukemiaCellCount.innerHTML=c.aggressiveLeukemiaCells.toFixed(),s.nonAggressiveLeukemiaCellCount.innerHTML=c.nonAggressiveLeukemiaCells.toFixed(),null!==c.drug){if(m){var t=u-c.drug.introductionTime,l=((m-t)/1e3).toFixed(1);s.drugInAction.innerHTML="".concat(c.drug.type," (").concat(l," units remaining)")}}else s.drugInAction.innerHTML="none",m=null;s.isAlive.innerHTML=c.alive,null!==c.criticalTimeStart?(s.criticalTime.innerHTML=((u-c.criticalTimeStart)/1e3).toFixed(1)+" units",s.criticalTime.classList.add("critical")):(s.criticalTime.innerHTML=0,s.criticalTime.classList.remove("critical"))};g();var C=function(e,t,l){for(var o=[],i=1;i<=4;i++)o.push({drug:"Alexan",atTime:2500*i});return o}();setInterval((function(){d||(c=function(e,t,l){if(void 0===l&&(l=[]),!e.alive)return e;var n=i({},e);n.nonAggressiveLeukemiaCells*=1.01,n.aggressiveLeukemiaCells*=1.005,n.redBloodCells=Math.max(0,n.redBloodCells-.2*n.aggressiveLeukemiaCells),n.whiteBloodCells=Math.max(0,n.whiteBloodCells-.2*n.aggressiveLeukemiaCells),n.thrombocytes=Math.max(0,n.thrombocytes-.2*n.aggressiveLeukemiaCells);var r=o(n);console.log({treatmentCourse:l,timePassed:t});var s=l.findIndex((function(e){return e.atTime===t}));return-1!==s&&(console.log("drug administered at ".concat(t)),n.drug={type:l[s].drug,introductionTime:t}),function(e,t){if(null!==e.drug){var l=a(e.drug.type);t-e.drug.introductionTime>=l&&(e.drug=null),e.redBloodCells*=.8,e.whiteBloodCells*=.8,e.thrombocytes*=.8,e.aggressiveLeukemiaCells*=.6,e.nonAggressiveLeukemiaCells*=.8}}(n,t),function(e,t){var l=function(e){return"high"==e?-1:"low"==e?1:0};e.redBloodCells*=1+.05*l(t.redBloodCells),e.whiteBloodCells*=1+.05*l(t.whiteBloodCells),e.thrombocytes*=1+.05*l(t.thrombocytes)}(n,r),function(e,t,l){var o=!Object.values(t).every((function(e){return"normal"===e}));null===e.criticalTimeStart?o&&(e.criticalTimeStart=l):o?l-e.criticalTimeStart>3e4&&(e.alive=!1):e.criticalTimeStart=null}(n,r=o(n),t),n}(c,u+=100,C),g())}),100);var v=window;for(var h in e)v[h]=e[h];e.__esModule&&Object.defineProperty(v,"__esModule",{value:!0})})();